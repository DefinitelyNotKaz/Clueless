import asyncio
import os
import sys

sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "..")))

from utils.pxls.pxls_stats_manager import PxlsStatsManager  # noqa: E402
from utils.setup import DbConnection, DbStatsManager  # noqa: E402

""" Script to populate the database with canvas palettes."""

# palette 1: c1-2 (16 total colors)
# palette 2: c3-7 (added black, beige, maroon, magenta. Light gray was also changed to be darker) (20 total colors)
# palette 3: c8-11 (added deep gray, peach, dark green, dark brown. Purple was also changed to be "warmer") (24 total colors)
# palette 4: c12-22 (purple was reverted to be less warm) (24 total colors)
# palette 5: c23 (yellow was made more saturated) (24 total colors)
# palette 6: c24-33 (added melon, rust, aqua, navy) (28 total colors)
# palette 7: c34-42 (aqua replaced with pastel yellow) (28 total colors)
# palette 8: c43-43a (redid all colors) (32 total colors)
# palette 9: c44-46 (tweaked all colors) (32 total colors)
# palette 10: c46-c75 (changed colors order) (32 total colors)

# gimmick palette 1: c21a (50 shades of gray) (50 total colors)
# gimmick palette 2: c30a (10 shades of blue, green, and red, + black and white) (32 total colors)


PALETTE_MAPPING = {
    "1": "p1",
    "2": "p1",
    "3": "p2",
    "4": "p2",
    "5": "p2",
    "6": "p2",
    "7": "p2",
    "8": "p3",
    "9": "p3",
    "10": "p3",
    "11": "p3",
    "12": "p4",
    "13": "p4",
    "14": "p4",
    "15": "p4",
    "16": "p4",
    "17": "p4",
    "18": "p4",
    "19": "p4",
    "20": "p4",
    "21": "p4",
    "21a": "g1",
    "22": "p4",
    "23": "p5",
    "24": "p6",
    "25": "p6",
    "26": "p6",
    "27": "p6",
    "28": "p6",
    "29": "p6",
    "30": "p6",
    "30a": "g2",
    "31": "p6",
    "32": "p6",
    "33": "p6",
    "34": "p7",
    "34a": "p7",
    "35": "p7",
    "36": "p7",
    "37": "p7",
    "38": "p7",
    "39": "p7",
    "40": "p7",
    "41": "p7",
    "42": "p7",
    "43": "p8",
    "43a": "p8",
    "44": "p9",
    "45": "p9",
    "45a": "p9",
    "46": "p10",
    "47": "p10",
    "48": "p10",
    "49": "p10",
    "50": "p10",
    "51": "p10",
    "52": "p10",
    "53": "p10",
    "54": "p10",
    "55": "p10",
    "56": "p10",
    "56a": "g3",
    "57": "p10",
    "58": "p10",
    "59": "p10",
    "60": "p10",
    "60a": "p11",
    "61": "p12",
    "62": "p12",
    "63": "p12",
    "64": "p12",
    "65": "p12",
    "66": "p12",
    "67": "p12",
    "68": "p12",
    "69": "p12",
    "70": "p12",
    "71": "p12",
    "72": "p12",
    "73": "p12",
    "74": "p12",
    "75": "p12",
    "76": "p13",
}

PALETTES = {
    "p1": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "black": "222222",
        "pink": "FFA7D1",
        "red": "E50000",
        "orange": "E59500",
        "brown": "A06A42",
        "yellow": "E5D900",
        "lime": "94E044",
        "green": "02BE01",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "mauve": "CF6EE4",
        "purple": "820080",
    },
    "p2": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "darkGrey": "222222",
        "black": "000000",
        "pink": "FFA7D1",
        "red": "E50000",
        "maroon": "800000",
        "beige": "FFDDCA",
        "orange": "E59500",
        "brown": "A06A42",
        "yellow": "E5D900",
        "lime": "94E044",
        "green": "02BE01",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "mauve": "CF6EE4",
        "magenta": "FF00FF",
        "purple": "820080",
    },
    "p3": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "deepGrey": "555555",
        "darkGrey": "222222",
        "black": "000000",
        "pink": "FFA7D1",
        "red": "E50000",
        "maroon": "800000",
        "beige": "FFDDCA",
        "peach": "F6B389",
        "orange": "E59500",
        "brown": "A06A42",
        "chocolate": "604028",
        "yellow": "E5D900",
        "lime": "94E044",
        "green": "02BE01",
        "forest": "005F00",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "mauve": "CF6EE4",
        "magenta": "FF00FF",
        "purple": "66033C",
    },
    "p4": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "deepGrey": "555555",
        "darkGrey": "222222",
        "black": "000000",
        "pink": "FFA7D1",
        "red": "E50000",
        "maroon": "800000",
        "beige": "FFDDCA",
        "peach": "F6B389",
        "orange": "E59500",
        "brown": "A06A42",
        "chocolate": "604028",
        "yellow": "E5D900",
        "lime": "94E044",
        "green": "02BE01",
        "forest": "005F00",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "mauve": "CF6EE4",
        "magenta": "FF00FF",
        "purple": "820080",
    },
    "p5": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "deepGrey": "555555",
        "darkGrey": "222222",
        "black": "000000",
        "pink": "FFA7D1",
        "red": "E50000",
        "maroon": "800000",
        "beige": "FFDDCA",
        "peach": "F6B389",
        "orange": "E59500",
        "brown": "A06A42",
        "chocolate": "604028",
        "yellow": "FFFF00",
        "lime": "94E044",
        "green": "02BE01",
        "forest": "005F00",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "mauve": "CF6EE4",
        "magenta": "FF00FF",
        "purple": "820080",
    },
    "p6": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "deepGrey": "555555",
        "darkGrey": "222222",
        "black": "000000",
        "pink": "FFA7D1",
        "watermelon": "FD4659",
        "red": "E50000",
        "maroon": "800000",
        "beige": "FFDDCA",
        "peach": "F6B389",
        "orange": "E59500",
        "rust": "FF5B00",
        "brown": "A06A42",
        "chocolate": "604028",
        "yellow": "FFFF00",
        "lime": "94E044",
        "green": "02BE01",
        "forest": "005F00",
        "aqua": "43EBC2",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "navy": "030764",
        "mauve": "CF6EE4",
        "magenta": "FF00FF",
        "purple": "820080",
    },
    "p7": {
        "white": "FFFFFF",
        "lightGrey": "E4E4E4",
        "midGrey": "888888",
        "deepGrey": "555555",
        "darkGrey": "222222",
        "black": "000000",
        "pink": "FFA7D1",
        "watermelon": "FD4659",
        "red": "E50000",
        "maroon": "800000",
        "beige": "FFDDCA",
        "peach": "F6B389",
        "orange": "E59500",
        "rust": "FF5B00",
        "brown": "A06A42",
        "chocolate": "604028",
        "yellow": "FFFF00",
        "pastelYellow": "FDFD96",
        "lime": "94E044",
        "green": "02BE01",
        "forest": "005F00",
        "cyan": "00D3DD",
        "cerulean": "0083C7",
        "blue": "0000EA",
        "navy": "030764",
        "mauve": "CF6EE4",
        "magenta": "FF00FF",
        "purple": "820080",
    },
    "p8": {
        "white": "ffffff",
        "pxlsLightGrey": "cdcdcd",
        "pxlsMediumGrey": "888888",
        "pxlsDeepGrey": "555555",
        "pxlsDarkGrey": "222222",
        "black": "000000",
        "pxlsWatermelon": "ff6474",
        "pxlsRed": "ea2b33",
        "pxlsRose": "be0622",
        "pxlsMaroon": "8a0216",
        "pxlsBeige": "ffd5bd",
        "pxlsPeach": "feb684",
        "pxlsBrown": "b6754b",
        "pxlsChocolate": "7a4c2d",
        "pxlsKhaki": "c9aa7c",
        "pxlsPastelYellow": "ffed91",
        "pxlsYellow": "ffe03c",
        "pxlsOrange": "ffa614",
        "pxlsRust": "ff761b",
        "pxlsLime": "a8f069",
        "pxlsGreen": "7dcc38",
        "pxlsDarkGreen": "519815",
        "pxlsForest": "33630a",
        "pxlsTeal": "39927f",
        "pxlsAqua": "77eeff",
        "pxlsAzure": "04b5f2",
        "pxlsBlue": "166cc4",
        "pxlsNavy": "1c387b",
        "pxlsPink": "ffa0e8",
        "pxlsMagenta": "ff4dea",
        "pxlsMauve": "c849d9",
        "pxlsPurple": "8e2aa4",
    },
    "p9": {
        "White": "ffffff",
        "Light Grey": "cdcdcd",
        "Medium Grey": "888888",
        "Deep Grey": "555555",
        "Dark Grey": "222222",
        "Black": "000000",
        "Watermelon": "ff6474",
        "Red": "f02523",
        "Rose": "b11206",
        "Maroon": "740c00",
        "Beige": "ffd5bc",
        "Peach": "ffb783",
        "Brown": "b66d3d",
        "Chocolate": "77431f",
        "Pastel Yellow": "fff491",
        "Yellow": "fde817",
        "Orange": "fca80e",
        "Rust": "fc7510",
        "Lime": "beff40",
        "Green": "70dd13",
        "Dark Green": "31a117",
        "Forest": "0b5f35",
        "Dark Teal": "277e6c",
        "Light Teal": "32b69f",
        "Aqua": "88fff3",
        "Azure": "24b5fe",
        "Blue": "125cc7",
        "Navy": "262960",
        "Pink": "ffa9d9",
        "Magenta": "ff59ef",
        "Mauve": "d24ce9",
        "Purple": "8b2fa8",
    },
    "p10": {
        "Black": "000000",
        "Dark Grey": "222222",
        "Deep Grey": "555555",
        "Medium Grey": "888888",
        "Light Grey": "CDCDCD",
        "White": "FFFFFF",
        "Beige": "FFD5BC",
        "Peach": "FFB783",
        "Brown": "B66D3D",
        "Chocolate": "77431F",
        "Rust": "FC7510",
        "Orange": "FCA80E",
        "Yellow": "FDE817",
        "Pastel Yellow": "FFF491",
        "Lime": "BEFF40",
        "Green": "70DD13",
        "Dark Green": "31A117",
        "Forest": "0B5F35",
        "Dark Teal": "277E6C",
        "Light Teal": "32B69F",
        "Aqua": "88FFF3",
        "Azure": "24B5FE",
        "Blue": "125CC7",
        "Navy": "262960",
        "Purple": "8B2FA8",
        "Mauve": "D24CE9",
        "Magenta": "FF59EF",
        "Pink": "FFA9D9",
        "Watermelon": "FF6474",
        "Red": "F02523",
        "Rose": "B11206",
        "Maroon": "740C00",
    },
    "p11": {
        "Black": "000000",
        "Dark Grey": "1d2025",
        "Deep Grey": "4b4f58",
        "Medium Grey": "858d98",
        "Light Grey": "c2cbd4",
        "White": "ffffff",
        "Beige": "fee1cf",
        "Peach": "febf94",
        "Brown": "bc7541",
        "Chocolate": "6c422c",
        "Dark Chocolate": "38271d",
        "Rust": "ea5b15",
        "Orange": "fea815",
        "Yellow": "fae70f",
        "Pastel Yellow": "ffffaf",
        "Lime": "beff5d",
        "Green": "44d120",
        "Dark Green": "267e41",
        "Forest": "094449",
        "Dark Teal": "1f586c",
        "Light Teal": "17a8a3",
        "Aqua": "a8f6ff",
        "Azure": "1caadc",
        "Blue": "1650a2",
        "Navy": "1f1f55",
        "Dark Purple": "492360",
        "Purple": "9c29bc",
        "Mauve": "c785f3",
        "Magenta": "f854cf",
        "Pink": "feb2d9",
        "Watermelon": "ff745f",
        "Red": "e61415",
        "Rose": "9e1f16",
        "Maroon": "520400",
    },
    "p12": {
        "White": "FFFFFF",
        "Light Grey": "C2CBD4",
        "Medium Grey": "858D98",
        "Deep Grey": "4B4F58",
        "Dark Grey": "22272D",
        "Black": "000000",
        "Dark Chocolate": "38271D",
        "Chocolate": "6C422C",
        "Brown": "BC7541",
        "Peach": "FFB27F",
        "Beige": "FFD6BF",
        "Pink": "FEB2D9",
        "Magenta": "F854CF",
        "Mauve": "C785F3",
        "Purple": "9C29BC",
        "Dark Purple": "562972",
        "Navy": "1E1E5B",
        "Blue": "153FA2",
        "Azure": "1C95DF",
        "Aqua": "A0E8FF",
        "Light Teal": "17A8A3",
        "Dark Teal": "226677",
        "Forest": "094C45",
        "Dark Green": "278242",
        "Green": "43C91E",
        "Lime": "B7F954",
        "Pastel Yellow": "FFFFAF",
        "Yellow": "FAE70F",
        "Orange": "FEA815",
        "Rust": "EA5B15",
        "Maroon": "5A0400",
        "Rose": "990700",
        "Red": "D81515",
        "Watermelon": "FF635E",
    },
    "p13": {
        "White": "FFFFFF",
        "Light Grey": "B9C3CF",
        "Medium Grey": "777F8C",
        "Deep Grey": "424651",
        "Dark Grey": "1F1E26",
        "Black": "000000",
        "Dark Chocolate": "382215",
        "Chocolate": "7C3F20",
        "Brown": "C06F37",
        "Peach": "FEAD6C",
        "Beige": "FFD2B1",
        "Pink": "FFA4D0",
        "Magenta": "F14FB4",
        "Mauve": "E973FF",
        "Purple": "A630D2",
        "Dark Purple": "531D8C",
        "Navy": "242367",
        "Blue": "0334BF",
        "Azure": "149CFF",
        "Aqua": "8DF5FF",
        "Light Teal": "01BFA5",
        "Dark Teal": "16777E",
        "Forest": "054523",
        "Dark Green": "18862F",
        "Green": "61E021",
        "Lime": "B1FF37",
        "Pastel Yellow": "FFFFA5",
        "Yellow": "FDE111",
        "Orange": "FF9F17",
        "Rust": "F66E08",
        "Maroon": "550022",
        "Rose": "99011A",
        "Red": "F30F0C",
        "Watermelon": "FF7872"
        },
    "g1": {
        "fiftyShades01": "FFFFFF",
        "fiftyShades02": "FAFAFA",
        "fiftyShades03": "F5F5F5",
        "fiftyShades04": "F0F0F0",
        "fiftyShades05": "EBEBEB",
        "fiftyShades06": "E5E5E5",
        "fiftyShades07": "E0E0E0",
        "fiftyShades08": "DBDBDB",
        "fiftyShades09": "D6D6D6",
        "fiftyShades10": "D1D1D1",
        "fiftyShades11": "CBCBCB",
        "fiftyShades12": "C6C6C6",
        "fiftyShades13": "C1C1C1",
        "fiftyShades14": "BCBCBC",
        "fiftyShades15": "B7B7B7",
        "fiftyShades16": "B1B1B1",
        "fiftyShades17": "ACACAC",
        "fiftyShades18": "A7A7A7",
        "fiftyShades19": "A2A2A2",
        "fiftyShades20": "9D9D9D",
        "fiftyShades21": "979797",
        "fiftyShades22": "929292",
        "fiftyShades23": "8D8D8D",
        "fiftyShades24": "888888",
        "fiftyShades25": "838383",
        "fiftyShades26": "7D7D7D",
        "fiftyShades27": "787878",
        "fiftyShades28": "737373",
        "fiftyShades29": "6E6E6E",
        "fiftyShades30": "696969",
        "fiftyShades31": "636363",
        "fiftyShades32": "5E5E5E",
        "fiftyShades33": "595959",
        "fiftyShades34": "545454",
        "fiftyShades35": "4F4F4F",
        "fiftyShades36": "494949",
        "fiftyShades37": "444444",
        "fiftyShades38": "3F3F3F",
        "fiftyShades39": "3A3A3A",
        "fiftyShades40": "353535",
        "fiftyShades41": "2F2F2F",
        "fiftyShades42": "2A2A2A",
        "fiftyShades43": "252525",
        "fiftyShades44": "202020",
        "fiftyShades45": "1B1B1B",
        "fiftyShades46": "151515",
        "fiftyShades47": "101010",
        "fiftyShades48": "0B0B0B",
        "fiftyShades49": "060606",
        "fiftyShades50": "000000",
    },
    "g2": {
        "trinitronBlack": "000000",
        "trinitronRed0": "2e0000",
        "trinitronRed1": "5d0000",
        "trinitronRed2": "8b0000",
        "trinitronRed3": "b90000",
        "trinitronRed4": "e80000",
        "trinitronRed5": "ff1717",
        "trinitronRed6": "ff4646",
        "trinitronRed7": "ff7474",
        "trinitronRed8": "ffa2a2",
        "trinitronRed9": "ffd1d1",
        "trinitronGreen0": "002e00",
        "trinitronGreen1": "005d00",
        "trinitronGreen2": "008b00",
        "trinitronGreen3": "00b900",
        "trinitronGreen4": "00e800",
        "trinitronGreen5": "17ff17",
        "trinitronGreen6": "46ff46",
        "trinitronGreen7": "74ff74",
        "trinitronGreen8": "a2ffa2",
        "trinitronGreen9": "d1ffd1",
        "trinitronBlue0": "00002e",
        "trinitronBlue1": "00005d",
        "trinitronBlue2": "00008b",
        "trinitronBlue3": "0000b9",
        "trinitronBlue4": "0000e8",
        "trinitronBlue5": "1717ff",
        "trinitronBlue6": "4646ff",
        "trinitronBlue7": "7474ff",
        "trinitronBlue8": "a2a2ff",
        "trinitronBlue9": "d1d1ff",
        "trinitronWhite": "ffffff",
    },
    "g3": {
        "Darkest": "051620",
        "Dark": "316950",
        "Light": "86C06C",
        "Lightest": "DFF8D1",
    },
}


async def main():
    db_conn = DbConnection()
    stats = PxlsStatsManager(db_conn)
    db_stats = DbStatsManager(db_conn, stats)

    sql = """
        INSERT INTO palette_color (canvas_code, color_id, color_name, color_hex)
        VALUES (?,?,?,?) """

    print("adding palettes...")
    for canvas_code, palette_code in PALETTE_MAPPING.items():
        if not await db_stats.get_palette(canvas_code):
            palette = PALETTES[palette_code]
            idx = 0
            for color_name, color_hex in palette.items():
                values = (canvas_code, idx, color_name, color_hex)
                await db_conn.sql_insert(sql, values)
                idx += 1
            print(f"added c{canvas_code} palette")
    print("done!")


if __name__ == "__main__":
    asyncio.run(main())
